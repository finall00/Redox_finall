// Copyright 2023 QMK
// SPDX-License-Identifier: GPL-2.0-or-later

#include QMK_KEYBOARD_H
#include "color.h"

enum layers {
    _QWERTY = 0,
    _SYMB,
    _NAV,
    _LED,
    _COL
};

#define KC_SYMB LT(_SYMB, KC_8)

#define KCL_NAV LT(_NAV, KC_7)

#define MO_SYMB MO(_SYMB)

#define MO_NAV MO(_NAV)

#define KCL_LED LT(_LED, KC_BSPC)

/*
 * ┌───┬───┬───┬───┬───┬───┐                      ┌───┬───┬───┬───┬───┬───┐
 * │ E │ 1 │ 2 │ 3 │ 4 │ 5 │                      │ E │ 1 │ 2 │ 3 │ 4 │ 5 │
 * ├───┼───┼───┼───┼───┼───┼───┐              ┌───┼───┼───┼───┼───┼───┼───┤
 * │   │ q │ w │ e │ r │ t │ H │              │   │ q │ w │ e │ r │ t │ H │
 * ├───┼───┼───┼───┼───┼───┼───┤              ├───┼───┼───┼───┼───┼───┼───┤
 * │   │ a │ s │ d │ f │ g │ { │              │   │ a │ s │ d │ f │ g │ { │
 * ├───┼───┼───┼───┼───┼───┼───┤              ├───┼───┼───┼───┼───┼───┼───┤
 * │   │ z │ x │ c │ v │ b │ U │              │   │ z │ x │ c │ v │ b │ U │
 * ├───┼───┼───┼───┼───┼───┴───┘              └───┴───┼───┼───┼───┼───┼───┤
 * │   │   │   │   │   │┌───┬───┐            ┌───┬───┐│   │   │   │   │   │
 * └───┴───┴───┴───┴───┘│   │   │            │   │   │└───┴───┴───┴───┴───┘
 *                      ├───┼───┤            ├───┼───┤
 *                      │   │   │            │   │   │
 *                      └───┴───┘            └───┴───┘
 */

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
    //  [] = LAYOUT(
    // //    0-28  1-27      2-26     3-22     4-21    5-20       6-19                             7-28       8-27    9-26     10-22    11-21    12-20    13-19
    // //┌────────┬────────┬────────┬────────┬────────┬────────┐                                           ┌────────┬────────┬────────┬────────┬────────┬────────┐
    //    KC_1    ,KC_2    ,KC_3    ,KC_4    ,KC_5    ,KC_6    ,                                            KC_7    ,KC_8    ,KC_9    ,KC_1    ,KC_4    ,KC_4    ,   // 0-6
    // //├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
    //    KC_A    ,KC_B    ,KC_C    ,KC_D    ,KC_E    ,KC_F    ,KC_G    ,                          KC_H    ,KC_I    ,KC_J    ,KC_K    ,KC_L    ,KC_M    ,KC_N    ,   // 1-7
    // //├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
    //    KC_O    ,KC_P    ,KC_Q    ,KC_R    ,KC_S    ,KC_T    ,KC_4    ,                          KC_4    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,   // 2-8
    // //├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
    //    KC_4    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,                          KC_4    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,   // 3-9
    // //├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
    //    KC_4    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,                          KC_P    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,KC_4    ,   // 4-10
    // //└────────┴────────┴────────┴────────┴────────┼────────┼────────┐                         ┌────────┼────────┼────────┴────────┴────────┴────────┴────────┘
    //                                                 KC_4    , KC_4   ,                          KC_4    ,KC_4                                                     // 5 - 11
    //                                             // └────────┴────────┘                         └────────┴────────┘
    //  ),

    [_QWERTY] = LAYOUT(

        // ┌────────┬────────┬────────┬────────┬────────┬────────┐                                           ┌────────┬────────┬────────┬────────┬────────┬────────┐
            KC_TILD, KC_1,    KC_2,    KC_3,    KC_4, KC_5,                                                   KC_6, KC_7   , KC_8   , KC_9   , KC_0   , KC_PLUS,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_TAB,  KC_Q   , KC_W   , KC_E   , KC_R   , KC_T   , KC_PGUP,                           KC_PGDN, KC_Y   , KC_U   , KC_I   , KC_O   , KC_P   , KC_BSLS,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_ESC  , KC_A   , KC_S   , KC_D    , KC_F  , KC_G   , KC_LCBR,                           KC_RCBR, KC_H   , KC_J   , KC_K   , KC_L   , KC_SCLN, KC_QUOT,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_LSFT, KC_Z    ,KC_X    ,KC_C    , KC_V   , KC_B   , KC_HOME,                            KC_END,  KC_N, KC_M   , KC_LABK, KC_RABK, KC_QUES, KC_LSFT,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_LCTL, KC_LGUI, KCL_NAV ,KC_LALT ,  KC_SPC, KC_BSPC , MO_SYMB,                         KC_C, KC_BSPC, KC_MINS, KC_LEFT, KC_DOWN, KC_UP, KC_RGHT,
        // └────────┴────────┴────────┴────────┴────────┼────────┼────────┐                         ┌────────┼────────┼────────┴────────┴────────┴────────┴────────┘
                                                          KC_DEL, KCL_LED,                            KC_P, KC_ENT
                                                     // └────────┴────────┘                         └────────┴────────┘
        ),

    [_SYMB] = LAYOUT(
        // ┌────────┬────────┬────────┬────────┬────────┬────────┐                                           ┌────────┬────────┬────────┬────────┬────────┬────────┐
            KC_EXLM, KC_AT,   KC_HASH, KC_DLR,  KC_PERC, KC_CIRC,                                              KC_AMPR, KC_ASTR, KC_LPRN, KC_RPRN, KC_UNDS, KC_PLUS,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_GRV,  KC_TILD, KC_PIPE, KC_BSLS, KC_LCBR, KC_RCBR, KC_TRNS,                            KC_LABK, KC_RABK, KC_LBRC, KC_RBRC, KC_QUES, KC_COLN, KC_TRNS,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
             KC_TRNS, KC_LT,   KC_GT,   KC_DQT,  KC_SQT,  KC_QUOT, KC_TRNS,                           KC_TRNS, KC_TRNS, KC_SCLN, KC_EQL,  KC_MINS, KC_SLSH, KC_TRNS,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,                            KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,                            KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
        // └────────┴────────┴────────┴────────┴────────┼────────┼────────┐                         ┌────────┼────────┼────────┴────────┴────────┴────────┴────────┘
                                                         KC_TRNS, KC_TRNS,                           KC_TRNS, KC_TRNS
        //                                              └────────┴────────┘                         └───────┴────────┘ 
        ),

    [_NAV] = LAYOUT(

        // ┌────────┬────────┬────────┬────────┬────────┬────────┐                                           ┌────────┬────────┬────────┬────────┬────────┬────────┐
            KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,                                              KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_TRNS, KC_BTN1, KC_MS_U, KC_BTN2, KC_TRNS, KC_TRNS, KC_TRNS,                            KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_TRNS, KC_MS_L, KC_MS_D, KC_MS_R, KC_TRNS, KC_TRNS, KC_TRNS,                            KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_TRNS, KC_WH_U, KC_TRNS, KC_WH_D, KC_TRNS, KC_TRNS, KC_TRNS,                            KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,                           KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
        // └────────┴────────┴────────┴────────┴────────┼────────┼────────┐                         ┌────────┼────────┼────────┴────────┴────────┴────────┴────────┘
                                                         KC_TRNS , KC_TRNS,                          KC_TRNS , KC_TRNS
                                                     // └────────┴────────┘                         └────────┴────────┘
        ),

    [_LED] = LAYOUT(

        // ┌────────┬────────┬────────┬────────┬────────┬────────┐                                           ┌────────┬────────┬────────┬────────┬────────┬────────┐
            KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,                                             KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_TRNS, RGB_TOG, RGB_MOD, RGB_RMOD, RGB_VAI, RGB_SPI, UG_NEXT,                           KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_TRNS, RGB_M_P, RGB_M_B, RGB_M_SW, RGB_VAD, RGB_SPD, KC_TRNS,                           KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,                            KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
        // ├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
            KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,                            KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
        // └────────┴────────┴────────┴────────┴────────┼────────┼────────┐                         ┌────────┼────────┼────────┴────────┴────────┴────────┴────────┘
                                                         KC_TRNS, KC_TRNS,                            KC_TRNS, KC_TRNS
                                                     // └────────┴────────┘                         └────────┴────────┘
        )

};

// led_config_t g_led_config = {
//   {
//        {      0,        1,      2,      3,     4,          5,        NO_LED},
//        {     33,       34,     35,     36,     37,        38,             39},
//        {     47,       48,     49,     50,     51,        52,             53},
//        {     40,       41,     42,     43,     44,        45,             46},
//        {     61,       62,     63,     64,     65,        66,             67},
//        { NO_LED,   NO_LED, NO_LED, NO_LED,  NO_LED,       68,             69},

//        {  NO_LED,       6,      7,      8,     9,         10,             11},
//        {     12,       13,     14,     15,     16,        17,             18},
//        {     54,       55,     56,     57,     58,        59,             60},
//        {     19,       20,     21,     22,     23,        24,             25},
//        {     26,       27,     28,     29,     30,        31,             32},
//        {    70,        71, NO_LED, NO_LED,  NO_LED,   NO_LED,         NO_LED}
// },{
//   //Funciono sem o mapa fisico, fodase
//         {188, 16},  {187, 48},  {149, 64},  {112, 64},  {37, 48},  {38, 16},         // Primeira linha
//         {33, 16},   {34, 48},   {35, 64},   {36, 64},   {37, 48},  {38, 16},   {39, 16},     // Segunda linha
//         {47, 48},   {48, 48},   {49, 48},   {50, 48},   {51, 48},  {52, 48},   {53, 48},     // Terceira linha
//         {40, 32},   {41, 32},   {42, 32},   {43, 32},   {44, 32},  {45, 32},   {46, 32},     // Quarta linha
//         {61, 64},   {62, 64},   {63, 64},   {64, 64},   {65, 64},  {66, 64},   {67, 64},     // Quinta linha
//         {68, 64},    {69, 64},     // Sexta linha

//         {6, 16},    {7, 48},    {8, 64},    {9, 64},    {10, 64},    {11, 64},      // Linha Split 1
//         {12, 16},   {13, 48},   {14, 64},   {15, 64},   {16, 64},   {17, 64},     {18, 64},      // Linha Split 2
//         {54, 48},   {55, 48},   {56, 48},   {57, 48},   {58, 48},   {59, 48},     {60, 48},      // Linha Split 3
//         {19, 16},   {20, 48},   {21, 64},   {22, 64},   {23, 64},   {24, 64},     {25, 64},      // Linha Split 4
//         {26, 16},   {27, 48},   {28, 64},   {29, 64},   {30, 64},   {31, 64},     {32, 64},      // Linha Split 5
//         {70, 16},   {71, 16}      // Linha Split 6

// },{
//         4, 4, 4, 4, 4, 4,  // Primeira linha
//         4, 4, 4, 4, 4, 4, 4,  // Segunda linha
//         4, 4, 4, 4, 4, 4, 4,  // Terceira linha
//         4, 4, 4, 4, 4, 4, 4,  // Quarta linha
//         4, 4, 4, 4, 4, 4, 4,  // Quinta linha
//         4, 4,  // Sexta linha

//          4, 4, 4, 4, 4, 4,  // Linha Split 1
//         4, 4, 4, 4, 4, 4, 4,  // Linha Split 2
//         4, 4, 4, 4, 4, 4, 4,  // Linha Split 3
//         4, 4, 4, 4, 4, 4, 4,  // Linha Split 4
//         4, 4, 4, 4, 4, 4, 4,  // Linha Split 5
//         4, 4   // Linha Split 6
//         }
// };

led_config_t g_led_config = {{{0, 1, 2, 3, 4, 5, NO_LED},
                              {6, 7, 8, 9, 10, 11, 12},
                              {13, 14, 15, 16, 17, 18, 19},
                              {20, 21, 22, 23, 24, 25, 26},
                              {27, 28, 29, 30, 31, 32, 33},
                              {NO_LED, NO_LED, NO_LED, NO_LED, NO_LED, 34, 35},

                              {NO_LED, 36, 37, 38, 39, 40, 41},
                              {42, 43, 44, 45, 46, 47, 48},
                              {49, 50, 51, 52, 53, 54, 55},
                              {56, 57, 58, 59, 60, 61, 62},
                              {63, 64, 65, 66, 67, 68, 69},
                              {70, 71, NO_LED, NO_LED, NO_LED, NO_LED, NO_LED}},
                             {
                                 // Funciono sem o mapa fisico, fodase // funciono não // ta mais ou menos
                                 {188, 16}, {187, 48}, {149, 64}, {112, 64}, {37, 48}, {38, 16},           // Primeira linha
                                 {33, 16},  {34, 48},  {35, 64},  {36, 64},  {37, 48}, {38, 16}, {39, 16}, // Segunda linha
                                 {47, 48},  {48, 48},  {49, 48},  {50, 48},  {51, 48}, {52, 48}, {53, 48}, // Terceira linha
                                 {40, 32},  {41, 32},  {42, 32},  {43, 32},  {44, 32}, {45, 32}, {46, 32}, // Quarta linha
                                 {61, 64},  {62, 64},  {63, 64},  {64, 64},  {65, 64}, {66, 64}, {67, 64}, // Quinta linha
                                 {68, 64},  {69, 64},                                                      // Sexta linha

                                 {6, 16},   {7, 48},   {8, 64},   {9, 64},   {10, 64}, {11, 64},           // Linha Split 1
                                 {12, 16},  {13, 48},  {14, 64},  {15, 64},  {16, 64}, {17, 64}, {18, 64}, // Linha Split 2
                                 {54, 48},  {55, 48},  {56, 48},  {57, 48},  {58, 48}, {59, 48}, {60, 48}, // Linha Split 3
                                 {19, 16},  {20, 48},  {21, 64},  {22, 64},  {23, 64}, {24, 64}, {25, 64}, // Linha Split 4
                                 {26, 16},  {27, 48},  {28, 64},  {29, 64},  {30, 64}, {31, 64}, {32, 64}, // Linha Split 5
                                 {70, 16},  {71, 16}                                                       // Linha Split 6

                             },
                             {
                                 4, 4, 4, 4, 4, 4,    // Primeira linha
                                 4, 4, 4, 4, 4, 4, 4, // Segunda linha
                                 4, 4, 4, 4, 4, 4, 4, // Terceira linha
                                 4, 4, 4, 4, 4, 4, 4, // Quarta linha
                                 4, 4, 4, 4, 4, 4, 4, // Quinta linha
                                 4, 4,                // Sexta linha

                                 4, 4, 4, 4, 4, 4,    // Linha Split 1
                                 4, 4, 4, 4, 4, 4, 4, // Linha Split 2
                                 4, 4, 4, 4, 4, 4, 4, // Linha Split 3
                                 4, 4, 4, 4, 4, 4, 4, // Linha Split 4
                                 4, 4, 4, 4, 4, 4, 4, // Linha Split 5
                                 4, 4                 // Linha Split 6
                             }};

// Config layear led

bool rgb_matrix_indicators_advanced_user(uint8_t led_min, uint8_t led_max) {
    if (get_highest_layer(layer_state) > 0) {
        uint8_t layer = get_highest_layer(layer_state);

        for (uint8_t row = 0; row < MATRIX_ROWS; ++row) {
            for (uint8_t col = 0; col < MATRIX_COLS; ++col) {
                uint8_t index = g_led_config.matrix_co[row][col];

                if (index >= led_min && index < led_max && index != NO_LED && keymap_key_to_keycode(layer, (keypos_t){col, row}) > KC_TRNS) {
                    switch(layer){
                        case _LED:
                        rgb_matrix_set_color(index, RGB_BLUE);
                        break;
                        case _NAV:
                            rgb_matrix_set_color(index, RGB_GREEN);
                        break;
                        case _SYMB:
                            rgb_matrix_set_color(index, RGB_PURPLE);
                        default:
                         rgb_matrix_set_color(index, RGB_WHITE);
                        break;
                    }
                }
            }
        }
    }
    return false;
}
